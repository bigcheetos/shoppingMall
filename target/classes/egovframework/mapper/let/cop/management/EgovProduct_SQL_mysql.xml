<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ProductDAO">
	
	<select id="selectProductListAll" resultMap="ProductResultMap" >
			SELECT 
				PRODUCT_ID,
				CATEGORY_ID,
				TYPE_ID,
				STOCK_ID,
				PRODUCT_NAME,
				PRODUCT_SUMMARY,
				PRODUCT_PRICE,
				PRODUCT_DISCOUNT_PRICE,
				PRODUCT_ORIGIN,
				PRODUCT_DELIVERYPAY,
				PRODUCT_STATUS,
				PRODUCT_RDCNT,
				PRODUCT_BESTCNT,
				PRODUCT_REGID,
				PRODUCT_UPDID,
				PRODUCT_REGDATE,
				PRODUCT_UPDDATE
			FROM
				PRODUCT			
	</select>
	
	<select id="selectNextProductId" resultType="String" >
			SELECT 
				MAX(PRODUCT_ID) + 1
			FROM
				PRODUCT			
	</select>
	
	<insert id="insertProduct">
			INSERT INTO
				PRODUCT
			(
				PRODUCT_ID,
				CATEGORY_ID,
				TYPE_ID,
				STOCK_ID,
				PRODUCT_NAME,
				PRODUCT_SUMMARY,
				PRODUCT_PRICE,
				PRODUCT_DISCOUNT_PRICE,
				PRODUCT_ORIGIN,
				PRODUCT_DELIVERYPAY,
				PRODUCT_STATUS,
				PRODUCT_RDCNT,
				PRODUCT_BESTCNT,
				PRODUCT_REGID,
				PRODUCT_UPDID,
				PRODUCT_REGDATE,
				PRODUCT_UPDDATE
			)
			VALUES
			(
				#{productId},
				#{categoryId},
				#{typeId},
				#{stockId},
				#{productName},
				#{productSummary},
				#{productPrice},
				#{productDiscountPrice},
				#{productOrigin},
				#{productDeliverypay},
				#{productStatus},
				#{productRdcnt},
				#{productBestcnt},
				#{productRegid},
				#{productUpdid},
				now(),
				now()
			)
	</insert>
	
	<update id="updateProduct">
			UPDATE
				PRODUCT
			SET
				CATEGORY_ID 			= #{categoryId},
				TYPE_ID 				= #{typeId},
				STOCK_ID 				= #{stockId},
				PRODUCT_NAME 			= #{productName},
				PRODUCT_SUMMARY 		= #{productSummary},
				PRODUCT_PRICE 			= #{productPrice},
				PRODUCT_DISCOUNT_PRICE  = #{productDiscountPrice},
				PRODUCT_ORIGIN 			= #{productOrigin},
				PRODUCT_DELIVERYPAY 	= #{productDeliverypay},
				PRODUCT_STATUS 			= #{productStatus},
<!-- 				PRODUCT_RDCNT 			= #{productRdcnt},
				PRODUCT_BESTCNT 		= #{productBestcnt}, -->
				PRODUCT_UPDID 			= #{productUpdid},
				PRODUCT_UPDDATE 		= now()
			WHERE
				PRODUCT_ID 				= #{productId}
	</update>
	
	<delete id="deleteProduct">
		DELETE
			FROM PRODUCT
		WHERE
			PRODUCT_ID = #{productId}
	</delete>
	
	<resultMap id="ProductResultMap" type="egovframework.let.cop.management.service.ProductVO">
		<result property="productId" column="PRODUCT_ID"/>
		<result property="categoryId" column="CATEGORY_ID"/>
		<result property="typeId" column="TYPE_ID"/>
		<result property="stockId" column="STOCK_ID"/>
		<result property="productName" column="PRODUCT_NAME"/>
		<result property="productSummary" column="PRODUCT_SUMMARY"/>
		<result property="productPrice" column="PRODUCT_PRICE"/>
		<result property="productDiscountPrice" column="PRODUCT_DISCOUNT_PRICE"/>
		<result property="productOrigin" column="PRODUCT_ORIGIN"/>
		<result property="productDeliverypay" column="PRODUCT_DELIVERYPAY"/>
		<result property="productStatus" column="PRODUCT_STATUS"/>
		<result property="productRdcnt" column="PRODUCT_RDCNT"/>
		<result property="productBestcnt" column="PRODUCT_BESTCNT"/>
		<result property="productRegid" column="PRODUCT_REGID"/>
		<result property="productUpdid" column="PRODUCT_UPDID"/>
		<result property="productRegdate" column="PRODUCT_REGDATE"/>
		<result property="productUpddate" column="PRODUCT_UPDDATE"/>
	</resultMap>
</mapper>